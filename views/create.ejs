<!-- views/create.ejs -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Appointment</title>
</head>
<body>
    <!-- Include the navigation bar -->
    <%- include('partials/nav.ejs') %>
    
    <h1>Create Appointment</h1>
    <!-- Form for creating a new appointment -->
    <form id="appointmentForm">
        <label for="title">Title:</label>
        <input type="text" id="title" required>
        <label for="date">Date:</label>
        <input type="datetime-local" id="date" required>
        <button type="submit">Add Appointment</button>
    </form>

    <!-- List to display appointments -->
    <ul id="appointmentsList"></ul>

    <!-- JavaScript for create page -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Handle form submission to create a new appointment
            document.getElementById('appointmentForm').addEventListener('submit', (event) => {
                event.preventDefault();
                const title = document.getElementById('title').value;
                const date = document.getElementById('date').value;

                // Send POST request to create appointment
                fetch('/create', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ title, date }),
                })
                .then(response => response.json())
                .then(newAppointment => {
                    // Display the newly created appointment
                    const listItem = document.createElement('li');
                    listItem.textContent = `${newAppointment.title} - ${new Date(newAppointment.date).toLocaleString()}`;
                    document.getElementById('appointmentsList').appendChild(listItem);
                    document.getElementById('appointmentForm').reset();
                })
                .catch(error => console.error('Error creating appointment:', error));
            });
        });
    </script>
</body>
</html>

