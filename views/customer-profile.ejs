<!-- Display search input for client phone numbers above Next Day buttons -->
<div class="search-container">
  <label for="clientPhoneNumber">Enter Client Phone Number:</label>
  <input type="text" id="clientPhoneNumber" class="search-input" placeholder="Enter phone number" oninput="formatPhoneNumber(this)">
  <button onclick="searchClients()">Search</button>
</div>

<!-- Display client and dog information here -->
<div id="clientInfoContainer">
  <!-- Content will be dynamically updated here -->
</div>

<script>
   // Add event listener to format phone number while typing
function formatPhoneNumber(input) {
    const cursorPosition = input.selectionStart;
    const numericValue = input.value.replace(/\D/g, '');
    const limitedNumericValue = numericValue.slice(0, 10);

    let formattedNumber = '';
    let formattedCursorPosition = cursorPosition;

    for (let i = 0; i < limitedNumericValue.length; i++) {
        if (i === 3 || i === 6) {
            formattedNumber += '-';
            if (cursorPosition > i) {
                formattedCursorPosition++;
            }
        }
        formattedNumber += limitedNumericValue[i];
    }

    // Update the global variable clientPhoneNumber
    clientPhoneNumber = formattedNumber;

    input.value = formattedNumber;
    input.setSelectionRange(formattedCursorPosition, formattedCursorPosition);
}

async function searchClients() {
  const phoneNumber = document.getElementById('clientPhoneNumber').value;
  
  try {
      const response = await fetch(`/get-client-profile?phoneNumber=${phoneNumber}`);
      const data = await response.json();

      if (response.ok) {
          // Display client and dog information
          const clientInfoContainer = document.getElementById('clientInfoContainer');
          clientInfoContainer.innerHTML = `
              <h2>${data.firstname} ${data.lastname}</h2>
              <p>Phone Number: ${data.phone_number}</p>
              <!-- Display other client and dog information as needed -->
          `;
      } else {
          // Handle error case
          console.error('Error:', data.error);
          alert('Error fetching client information');
      }
  } catch (error) {
      console.error('Error:', error);
      alert('Error fetching client information');
  }
}
</script>
